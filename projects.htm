<!DOCTYPE html>
<html lang="en" class="light">
<head>
  <meta charset="UTF-8" />
  <title>JujuCorp | Projects</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet" />
<script>
  let lopo = localStorage.getItem("lopo") === "true"; // Load saved preference

  function applyStyle() {
    const styleFile = lopo ? "lopo-style.htm" : "style.htm";

    const oldStyle = document.getElementById("dynamic-style");
    if (oldStyle) oldStyle.remove();

    fetch(styleFile)
      .then(response => {
        if (!response.ok) throw new Error("Failed to fetch style");
        return response.text();
      })
      .then(css => {
        const styleContainer = document.createElement("div");
        styleContainer.innerHTML = css;
        const newStyle = styleContainer.querySelector("style");
        newStyle.id = "dynamic-style";
        document.head.appendChild(newStyle);
        console.log(lopo ? "Lopo Mode" : "Normal Mode");
      })
      .catch(error => {
        console.error("Style failed to load:", error);
      });
  }

  function toggleStyle() {
    lopo = !lopo;
    localStorage.setItem("lopo", lopo); // Save preference
    applyStyle();
  }

  applyStyle(); // Apply saved style on page load
</script>
</head>
<body>
  <div class="title">
    <h1>~ Welcome to the JujuCorp! ~</h1>
    <div class="underline"></div>
  </div>
  <span id="download-count">Loading...</span>
  <script>
    async function fetchOrgStats(orgSlug) {
      let totalDownloads = 0;
      let totalFollowers = 0;
      let offset = 0;
      const limit = 100;
      let allProjects = [];

      while (true) {
        const res = await fetch(`https://api.modrinth.com/v2/search?facets=${encodeURIComponent('[["author:' + orgSlug + '"]]')}&offset=${offset}&limit=${limit}`);
        const data = await res.json();
        const projects = data.hits;

        allProjects = allProjects.concat(projects);
        projects.forEach(project => {
          totalDownloads += project.downloads;
        });

        if (projects.length < limit) break;
        offset += limit;
      }

      for (const project of allProjects) {
        const projRes = await fetch(`https://api.modrinth.com/v2/project/${project.slug}`);
        const projData = await projRes.json();
        totalFollowers += projData.followers;
      }

      document.getElementById("download-count").textContent =
        `Total downloads: ${totalDownloads.toLocaleString()}, Total followers: ${totalFollowers.toLocaleString()}`;
    }

    fetchOrgStats("jujucorp").catch(err => {
      console.error("Failed to fetch org stats", err);
      document.getElementById("download-count").textContent = "Failed to load stats.";
    });
    <div class="box1-team">
  <div class="team-about-flex">
    <button onclick="toggleStyle()"><img src="assets/lopo.png" alt=".lopotitchat" class="about-int-red" /></button>
    <div class="team-info-horizontal" style="flex: 1;">
      <div style="flex: 1;">
        <h2 style="font-family: 'MinecraftBold', sans-serif;">
          .lopotitchat <em style="font-family: 'Minecraft', sans-serif; font-size: 1.8rem; color: #555; white-space: nowrap; margin-top: -10px;">- Head Moderator</em>
        </h2>
        <p style="font-family: 'Roboto', sans-serif; max-width: none; flex: 1;">
          Hello, I'm Lopo, the Great Mod of the JuJuCorp. I'm the one who maintain peace and order, I'm not the best for the work, but Spider-man : Across the Spider-verse is my favortie animated film so... Oh, I almost forgot...English is not my first language so I can make mistake. I hope Juju will correct me...
        </p>
      </div>
    </div>
  </div>
</div>
  </script>
  <footer id="footer-placeholder"></footer>
  <script>
    fetch("footer.htm")
      .then(response => {
        if (!response.ok) throw new Error('Network response was not ok');
        return response.text();
      })
      .then(html => {
        document.getElementById('footer-placeholder').outerHTML = html;
      })
      .catch(error => {
        console.error('Failed to load footer:', error);
        document.getElementById('footer-placeholder').innerHTML = '<p>Footer failed to load.</p>';
      });
  </script>
</body>
</html>
